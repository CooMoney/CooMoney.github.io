(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d45eba2"],{"0fdc":function(t,e,n){},"19f2":function(t,e,n){"use strict";var s=n("8c6f"),a=n.n(s);a.a},"1dde":function(t,e,n){var s=n("d039"),a=n("b622"),c=n("2d00"),r=a("species");t.exports=function(t){return c>=51||!s((function(){var e=[],n=e.constructor={};return n[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1e47":function(t,e,n){"use strict";var s=n("8387"),a=n.n(s);a.a},2482:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{blurMask:!0,show:t.show}})},a=[],c={name:"BlurMask",props:{show:Boolean}},r=c,i=(n("e5fc"),n("2877")),o=Object(i["a"])(r,s,a,!1,null,"35997c47",null);e["a"]=o.exports},2574:function(t,e,n){"use strict";var s=n("d3d9"),a=n.n(s);a.a},"331f":function(t,e,n){"use strict";var s=n("0fdc"),a=n.n(s);a.a},3924:function(t,e,n){},"3abc":function(t,e,n){t.exports=n.p+"img/avatar_empty.e995d23e.svg"},"46e1":function(t,e,n){},"575c":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main",on:{click:function(e){return t.$emit("select",t.user)}}},[s("div",{staticClass:"left"},[s("div",{staticClass:"idx"},[t._v(t._s(t.idx))]),s("img",{attrs:{src:t.user.userPhoto?t.user.userPhoto:n("3abc")}})]),s("div",{staticClass:"center"},[s("div",{staticClass:"username"},[t._v(t._s(t.user.username))]),s("div",{staticClass:"email"},[t._v(t._s(t.user.email))])]),s("div",{staticClass:"right"},[t.isJudge?s("div",{staticClass:"auth"},[s("div",{on:{click:function(e){return t.$emit("judge",!0,t.user.applicationId)}}},[t._v("同意")]),s("div",{on:{click:function(e){return t.$emit("judge",!1,t.user.applicationId)}}},[t._v("拒絕")])]):t._e()])])},a=[],c=(n("a9e3"),{name:"MemberItem",props:{user:[Object,String],idx:Number,isJudge:Boolean}}),r=c,i=(n("2574"),n("2877")),o=Object(i["a"])(r,s,a,!1,null,"71e96479",null);e["a"]=o.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var s=n("1d80"),a=n("5899"),c="["+a+"]",r=RegExp("^"+c+c+"*"),i=RegExp(c+c+"*$"),o=function(t){return function(e){var n=String(s(e));return 1&t&&(n=n.replace(r,"")),2&t&&(n=n.replace(i,"")),n}};t.exports={start:o(1),end:o(2),trim:o(3)}},"60b1":function(t,e,n){},7156:function(t,e,n){var s=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var c,r;return a&&"function"==typeof(c=e.constructor)&&c!==n&&s(r=c.prototype)&&r!==n.prototype&&a(t,r),t}},"781f":function(t,e,n){t.exports=n.p+"img/cross.91481689.svg"},8387:function(t,e,n){},8418:function(t,e,n){"use strict";var s=n("c04e"),a=n("9bf2"),c=n("5c6c");t.exports=function(t,e,n){var r=s(e);r in t?a.f(t,r,c(0,n)):t[r]=n}},"8c6f":function(t,e,n){},a2a9:function(t,e,n){"use strict";var s=n("3924"),a=n.n(s);a.a},a9e3:function(t,e,n){"use strict";var s=n("83ab"),a=n("da84"),c=n("94ca"),r=n("6eeb"),i=n("5135"),o=n("c6b6"),u=n("7156"),l=n("c04e"),d=n("d039"),f=n("7c73"),m=n("241c").f,p=n("06cf").f,v=n("9bf2").f,b=n("58a8").trim,h="Number",g=a[h],C=g.prototype,_=o(f(C))==h,w=function(t){var e,n,s,a,c,r,i,o,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=b(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+u}for(c=u.slice(2),r=c.length,i=0;i<r;i++)if(o=c.charCodeAt(i),o<48||o>a)return NaN;return parseInt(c,s)}return+u};if(c(h,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var k,N=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof N&&(_?d((function(){C.valueOf.call(n)})):o(n)!=h)?u(new g(w(e)),n,N):w(e)},x=s?m(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;x.length>y;y++)i(g,k=x[y])&&!i(N,k)&&v(N,k,p(g,k));N.prototype=C,C.constructor=N,r(a,h,N)}},ae40:function(t,e,n){var s=n("83ab"),a=n("d039"),c=n("5135"),r=Object.defineProperty,i={},o=function(t){throw t};t.exports=function(t,e){if(c(i,t))return i[t];e||(e={});var n=[][t],u=!!c(e,"ACCESSORS")&&e.ACCESSORS,l=c(e,0)?e[0]:o,d=c(e,1)?e[1]:void 0;return i[t]=!!n&&!a((function(){if(u&&!s)return!0;var t={length:-1};u?r(t,1,{enumerable:!0,get:o}):t[1]=1,n.call(t,l,d)}))}},b333:function(t,e,n){t.exports=n.p+"img/add.9f422139.png"},cc92:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[t.createNewClub?n("NewClub",{on:{cancel:function(e){t.createNewClub=!1}}}):t._e(),n("List",{attrs:{show:t.showList},on:{toggleList:function(e){t.showList=!t.showList}}}),n("BlurMask",{attrs:{show:t.createNewClub||t.showList}}),n("div",{staticClass:"block"},[n("div",{staticClass:"serachBarBlock"},[n("SearchBar",{on:{newClub:function(e){t.createNewClub=!0},toggleList:function(e){t.showList=!t.showList}}})],1),n("div",{staticClass:"space"}),n("div",{staticClass:"clubsBlock"},[n("div",{staticClass:"top"},[n("font-awesome-icon",{staticStyle:{color:"#aeacac"},attrs:{icon:t.clubLayout?"table":"list",size:"lg"},on:{click:function(e){t.clubLayout=!t.clubLayout}}})],1),t._l(t.joinedClubs,(function(e,s){return n("ClubPreview",{key:s,attrs:{club:e,list:t.clubLayout,disable:t.createNewClub||t.showList}})}))],2),n("p",{staticClass:"msg"},[t._v(" "+t._s("didn't join "+(0===t.joinedClubs.length?"any":"more")+" groups")+" ")]),n("div",{staticClass:"space"})])],1)},a=[],c=(n("96cf"),n("1da1")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"bar"},[s("font-awesome-icon",{staticStyle:{color:"#9e9e9e"},attrs:{icon:"bars",size:"lg"},on:{click:function(e){return t.$emit("toggleList")}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.clubName,expression:"clubName"}],attrs:{type:"text",placeholder:"尋找在CooMoney中的社群"},domProps:{value:t.clubName},on:{focus:function(e){t.isFocus=!0},blur:function(e){t.isFocus=!1},input:[function(e){e.target.composing||(t.clubName=e.target.value)},t.searchClub]}}),""!==t.photoURL?s("img",{attrs:{src:t.photoURL}}):s("img",{attrs:{src:n("3abc")}})],1),s("div",{class:{block:!0,focus:t.isFocus}},[0===t.matchResult.length?s("div",{staticClass:"result"},[t._v(" ...沒有符合條件的社群 ")]):s("div",{staticClass:"result"},t._l(t.matchResult,(function(e,n){return s("div",{key:n,staticClass:"item",on:{click:function(n){return t.apply(e.id,e.clubName)}}},[s("img",{attrs:{src:e.clubImage,alt:""}}),s("div",{staticClass:"cont"},[s("div",{staticClass:"title"},[t._v(t._s(e.clubName))]),s("div",{staticClass:"content"},[t._v(t._s(e.clubIntro))])])])})),0),s("div",{staticClass:"new",on:{click:function(e){return t.$emit("newClub")}}},[s("img",{staticClass:"add",attrs:{src:n("b333"),alt:""}}),t._m(0)])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cont"},[n("div",{staticClass:"title"},[t._v("在CooMoney中建立你的社群")]),n("div",{staticClass:"content"},[t._v("tap to create your group in 10 second")])])}],o=(n("fb6a"),{name:"",data:function(){return{isFocus:!1,clubName:"",matchResult:[],photoURL:""}},beforeMount:function(){this.photoURL=localStorage.getItem("userPhoto")},methods:{searchClub:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.matchResult=[],""===t.clubName){e.next=7;break}return e.next=4,t.$store.dispatch("searchClub",{clubName:t.clubName});case 4:n=e.sent,t.matchResult=n.data.data,console.log(t.matchResult);case 7:case"end":return e.stop()}}),e)})))()},apply:function(t,e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var a,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!confirm("確定要申請加入「".concat(e,"」社群嗎?"))){s.next=5;break}return a=new Date,c=new Date(a).getFullYear()+"-"+("0"+(new Date(a).getMonth()+1)).slice(-2)+"-"+("0"+new Date(a).getDate()).slice(-2),s.next=5,n.$store.dispatch("joinApplication",{data:{date:c,reason:"none"},params:{clubID:t}});case 5:case"end":return s.stop()}}),s)})))()}}}),u=o,l=(n("a2a9"),n("2877")),d=Object(l["a"])(u,r,i,!1,null,"ee7d3fe6",null),f=d.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{main:!0,list:t.list},style:{backgroundImage:"url("+t.club.clubImage+")"},on:{click:t.enter}},[n("div",{staticClass:"content"},[n("p",{staticClass:"title"},[t._v(t._s(t.club.clubName))]),n("div",{staticClass:"right"},[n("p",{staticClass:"date"},[t._v(t._s(t.club.createdAt.substring(0,10).replace("-","/").replace("-","/")))]),n("p",{staticClass:"member"},[t._v(t._s(t.club.clubMembers.length+"位成員"))])])])])},p=[],v={name:"ClubPreview",props:{club:Object,list:Boolean,disable:Boolean},methods:{enter:function(){this.disable||(this.$store.commit("setSelectedClub",this.club),this.$router.push("/Club"))}}},b=v,h=(n("331f"),Object(l["a"])(b,m,p,!1,null,"23c015be",null)),g=h.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main_c"},[s("img",{staticClass:"cross",attrs:{src:n("781f")},on:{click:function(e){return t.$emit("cancel")}}}),s("div",{staticClass:"title"},[t._v("建立你的社群")]),s("div",{staticClass:"block"},[s("div",{staticClass:"pair"},[s("div",{staticClass:"topic"},[t._v("社群名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.clubName,expression:"clubName"}],attrs:{type:"text"},domProps:{value:t.clubName},on:{input:function(e){e.target.composing||(t.clubName=e.target.value)}}})]),s("div",{staticClass:"pair"},[s("div",{staticClass:"topic"},[t._v("社群成員")]),s("div",{staticClass:"input-block"},[s("div",{class:{matchBlock:!0,focus:t.focusPartner}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"Your Partners"},domProps:{value:t.username},on:{focus:function(e){t.focusPartner=!0},blur:function(e){t.focusPartner=!1},input:[function(e){e.target.composing||(t.username=e.target.value)},t.searchUser]}}),s("div",{staticClass:"selectedUsers"},t._l(this.selectedUser,(function(t,e){return s("img",{key:e,staticClass:"sel",attrs:{src:t.userPhoto?t.userPhoto:n("3abc"),alt:""}})})),0),t._l(this.matchUsers,(function(e,n){return s("MemberItem",{key:n,attrs:{idx:n+1,user:e},on:{select:t.selectUser}})}))],2)])]),s("div",{staticClass:"pair"},[s("div",{staticClass:"topic"},[t._v("封面照片")]),s("input",{attrs:{type:"file"},on:{change:t.uploadFile}})]),s("div",{staticClass:"pair"},[s("button",{on:{click:t.create}},[t._v("建立")])])])])},_=[],w=n("575c"),k={name:"NewClub",data:function(){return{username:"",matchUsers:[],selectedUser:[],focusPartner:!1,clubName:"",clubImage:"",clubMembers:"",uploadedFile:""}},components:{MemberItem:w["a"]},methods:{selectUser:function(t){this.selectedUser.push(t)},searchUser:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.username),e.next=3,t.$store.dispatch("getAllUserByUsername",t.username);case 3:n=e.sent,t.matchUsers=n.data.data;case 5:case"end":return e.stop()}}),e)})))()},create:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,s,a,c,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$emit("cancel"),n=[],s=t.selectedUser,s[0])for(a=0;a<s.length;a++)n.push(s[a].username);return n=JSON.stringify(n),console.log(n),c=new FormData,c.append("clubImage",t.uploadedFile),c.set("clubName",t.clubName),c.set("clubMembers",n),e.next=12,t.$store.dispatch("createClub",c);case 12:return r=e.sent,i=new FormData,i.append("clubImage",t.uploadedFile),e.next=17,t.$store.dispatch("clubImage",i);case 17:o=e.sent,console.log(r),console.log(o);case 20:case"end":return e.stop()}}),e)})))()},uploadFile:function(t){this.uploadedFile=t.target.files[0]}}},N=k,x=(n("19f2"),Object(l["a"])(N,C,_,!1,null,"7dc26673",null)),y=x.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hide,expression:"hide"}],class:{main_l:!0,show:t.show}},[n("div",{staticClass:"header"},[t._v(" CooMoney -- 團隊記帳工具 ")])])},E=[],L=n("e67d"),O=n.n(L),$={name:"List",props:{show:Boolean},methods:{hide:function(){this.show&&this.$emit("toggleList")}},mounted:function(){this.popupItem=this.$el},directives:{ClickOutside:O.a}},R=$,A=(n("1e47"),Object(l["a"])(R,I,E,!1,null,"1c1ecb1d",null)),S=A.exports,j=n("2482"),M={name:"Home",components:{SearchBar:f,ClubPreview:g,NewClub:y,BlurMask:j["a"],List:S},props:{},data:function(){return{clubLayout:!1,createNewClub:!1,showList:!1,joinedClubs:[]}},beforeMount:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.$store.state),t.next=3,this.$store.dispatch("getClub");case 3:e=t.sent,this.joinedClubs=e.data.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},P=M,U=(n("fb20"),Object(l["a"])(P,s,a,!1,null,"fbdac97e",null));e["default"]=U.exports},d3d9:function(t,e,n){},e5fc:function(t,e,n){"use strict";var s=n("60b1"),a=n.n(s);a.a},e67d:function(t,e){function n(t){return"function"===typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function s(t,e){if(!t||!e)return!1;for(var n=0,s=e.length;n<s;n++)try{if(t.contains(e[n]))return!0;if(e[n].contains(t))return!1}catch(a){return!1}return!1}function a(t){return"undefined"!==typeof t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,e,c){if(!n(e))return;function r(e){if(c.context){var n=e.path||e.composedPath&&e.composedPath();n&&n.length>0&&n.unshift(e.target),t.contains(e.target)||s(c.context.popupItem,n)||t.__vueClickOutside__.callback(e)}}t.__vueClickOutside__={handler:r,callback:e.value};const i="ontouchstart"in document.documentElement?"touchstart":"click";!a(c)&&document.addEventListener(i,r)},update:function(t,e){n(e)&&(t.__vueClickOutside__.callback=e.value)},unbind:function(t,e,n){const s="ontouchstart"in document.documentElement?"touchstart":"click";!a(n)&&t.__vueClickOutside__&&document.removeEventListener(s,t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},e8b5:function(t,e,n){var s=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}},fb20:function(t,e,n){"use strict";var s=n("46e1"),a=n.n(s);a.a},fb6a:function(t,e,n){"use strict";var s=n("23e7"),a=n("861d"),c=n("e8b5"),r=n("23cb"),i=n("50c4"),o=n("fc6a"),u=n("8418"),l=n("b622"),d=n("1dde"),f=n("ae40"),m=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),b=[].slice,h=Math.max;s({target:"Array",proto:!0,forced:!m||!p},{slice:function(t,e){var n,s,l,d=o(this),f=i(d.length),m=r(t,f),p=r(void 0===e?f:e,f);if(c(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!c(n.prototype)?a(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return b.call(d,m,p);for(s=new(void 0===n?Array:n)(h(p-m,0)),l=0;m<p;m++,l++)m in d&&u(s,l,d[m]);return s.length=l,s}})}}]);
//# sourceMappingURL=chunk-7d45eba2.52532bf5.js.map