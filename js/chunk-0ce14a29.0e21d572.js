(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ce14a29"],{"0fdc":function(t,e,n){},1276:function(t,e,n){"use strict";var s=n("d784"),a=n("44e7"),i=n("825a"),c=n("1d80"),r=n("4840"),o=n("8aa5"),u=n("50c4"),l=n("14c3"),d=n("9263"),f=n("d039"),p=[].push,m=Math.min,v=4294967295,h=!f((function(){return!RegExp(v,"y")}));s("split",2,(function(t,e,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var s=String(c(this)),i=void 0===n?v:n>>>0;if(0===i)return[];if(void 0===t)return[s];if(!a(t))return e.call(s,t,i);var r,o,u,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,h=new RegExp(t.source,f+"g");while(r=d.call(h,s)){if(o=h.lastIndex,o>m&&(l.push(s.slice(m,r.index)),r.length>1&&r.index<s.length&&p.apply(l,r.slice(1)),u=r[0].length,m=o,l.length>=i))break;h.lastIndex===r.index&&h.lastIndex++}return m===s.length?!u&&h.test("")||l.push(""):l.push(s.slice(m)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var a=c(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,a,n):s.call(String(a),e,n)},function(t,a){var c=n(s,t,this,a,s!==e);if(c.done)return c.value;var d=i(t),f=String(this),p=r(d,RegExp),b=d.unicode,g=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),C=new p(h?d:"^(?:"+d.source+")",g),w=void 0===a?v:a>>>0;if(0===w)return[];if(0===f.length)return null===l(C,f)?[f]:[];var _=0,x=0,k=[];while(x<f.length){C.lastIndex=h?x:0;var y,N=l(C,h?f:f.slice(x));if(null===N||(y=m(u(C.lastIndex+(h?0:x)),f.length))===_)x=o(f,x,b);else{if(k.push(f.slice(_,x)),k.length===w)return k;for(var R=1;R<=N.length-1;R++)if(k.push(N[R]),k.length===w)return k;x=_=y}}return k.push(f.slice(_)),k}]}),!h)},"1b3e":function(t,e,n){"use strict";var s=n("586d"),a=n.n(s);a.a},"1dde":function(t,e,n){var s=n("d039"),a=n("b622"),i=n("2d00"),c=a("species");t.exports=function(t){return i>=51||!s((function(){var e=[],n=e.constructor={};return n[c]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1e47":function(t,e,n){"use strict";var s=n("8387"),a=n.n(s);a.a},2482:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{blurMask:!0,show:t.show}})},a=[],i={name:"BlurMask",props:{show:Boolean}},c=i,r=(n("e5fc"),n("2877")),o=Object(r["a"])(c,s,a,!1,null,"35997c47",null);e["a"]=o.exports},"331f":function(t,e,n){"use strict";var s=n("0fdc"),a=n.n(s);a.a},3924:function(t,e,n){},"3abc":function(t,e,n){t.exports=n.p+"img/avatar_empty.e995d23e.svg"},"44e7":function(t,e,n){var s=n("861d"),a=n("c6b6"),i=n("b622"),c=i("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[c])?!!e:"RegExp"==a(t))}},"46e1":function(t,e,n){},"586d":function(t,e,n){},"60b1":function(t,e,n){},"781f":function(t,e,n){t.exports=n.p+"img/cross.91481689.svg"},8387:function(t,e,n){},8418:function(t,e,n){"use strict";var s=n("c04e"),a=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var c=s(e);c in t?a.f(t,c,i(0,n)):t[c]=n}},a2a9:function(t,e,n){"use strict";var s=n("3924"),a=n.n(s);a.a},ae40:function(t,e,n){var s=n("83ab"),a=n("d039"),i=n("5135"),c=Object.defineProperty,r={},o=function(t){throw t};t.exports=function(t,e){if(i(r,t))return r[t];e||(e={});var n=[][t],u=!!i(e,"ACCESSORS")&&e.ACCESSORS,l=i(e,0)?e[0]:o,d=i(e,1)?e[1]:void 0;return r[t]=!!n&&!a((function(){if(u&&!s)return!0;var t={length:-1};u?c(t,1,{enumerable:!0,get:o}):t[1]=1,n.call(t,l,d)}))}},b333:function(t,e,n){t.exports=n.p+"img/add.9f422139.png"},cc92:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[t.createNewClub?n("NewClub",{on:{cancel:function(e){t.createNewClub=!1}}}):t._e(),n("List",{attrs:{show:t.showList},on:{toggleList:function(e){t.showList=!t.showList}}}),n("BlurMask",{attrs:{show:t.createNewClub||t.showList}}),n("div",{staticClass:"block"},[n("div",{staticClass:"serachBarBlock"},[n("SearchBar",{on:{newClub:function(e){t.createNewClub=!0},toggleList:function(e){t.showList=!t.showList}}})],1),n("div",{staticClass:"space"}),n("div",{staticClass:"clubsBlock"},[n("div",{staticClass:"top"},[n("font-awesome-icon",{staticStyle:{color:"#aeacac"},attrs:{icon:t.clubLayout?"table":"list",size:"lg"},on:{click:function(e){t.clubLayout=!t.clubLayout}}})],1),t._l(t.joinedClubs,(function(e,s){return n("ClubPreview",{key:s,attrs:{club:e,list:t.clubLayout,disable:t.createNewClub||t.showList}})}))],2),n("p",{staticClass:"msg"},[t._v(" "+t._s("didn't join "+(0===t.joinedClubs.length?"any":"more")+" groups")+" ")]),n("div",{staticClass:"space"})])],1)},a=[],i=(n("96cf"),n("1da1")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"bar"},[s("font-awesome-icon",{staticStyle:{color:"#9e9e9e"},attrs:{icon:"bars",size:"lg"},on:{click:function(e){return t.$emit("toggleList")}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.clubName,expression:"clubName"}],attrs:{type:"text",placeholder:"尋找在CooMoney中的社群"},domProps:{value:t.clubName},on:{focus:function(e){t.isFocus=!0},blur:function(e){t.isFocus=!1},input:[function(e){e.target.composing||(t.clubName=e.target.value)},t.searchClub]}}),""!==t.photoURL?s("img",{attrs:{src:t.photoURL}}):s("img",{attrs:{src:n("3abc")}})],1),s("div",{class:{block:!0,focus:t.isFocus}},[0===t.matchResult.length?s("div",{staticClass:"result"},[t._v(" ...沒有符合條件的社群 ")]):s("div",{staticClass:"result"},t._l(t.matchResult,(function(e,n){return s("div",{key:n,staticClass:"item",on:{click:function(n){return t.apply(e.id,e.clubName)}}},[s("img",{attrs:{src:e.clubImage,alt:""}}),s("div",{staticClass:"cont"},[s("div",{staticClass:"title"},[t._v(t._s(e.clubName))]),s("div",{staticClass:"content"},[t._v(t._s(e.clubIntro))])])])})),0),s("div",{staticClass:"new",on:{click:function(e){return t.$emit("newClub")}}},[s("img",{staticClass:"add",attrs:{src:n("b333"),alt:""}}),t._m(0)])])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cont"},[n("div",{staticClass:"title"},[t._v("在CooMoney中建立你的社群")]),n("div",{staticClass:"content"},[t._v("tap to create your group in 10 second")])])}],o=(n("fb6a"),{name:"",data:function(){return{isFocus:!1,clubName:"",matchResult:[],photoURL:""}},beforeMount:function(){this.photoURL=localStorage.getItem("userPhoto")},methods:{searchClub:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.matchResult=[],""===t.clubName){e.next=7;break}return e.next=4,t.$store.dispatch("searchClub",{clubName:t.clubName});case 4:n=e.sent,t.matchResult=n.data.data,console.log(t.matchResult);case 7:case"end":return e.stop()}}),e)})))()},apply:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!confirm("確定要申請加入「".concat(e,"」社群嗎?"))){s.next=5;break}return a=new Date,i=new Date(a).getFullYear()+"-"+("0"+(new Date(a).getMonth()+1)).slice(-2)+"-"+("0"+new Date(a).getDate()).slice(-2),s.next=5,n.$store.dispatch("joinApplication",{data:{date:i,reason:"none"},params:{clubID:t}});case 5:case"end":return s.stop()}}),s)})))()}}}),u=o,l=(n("a2a9"),n("2877")),d=Object(l["a"])(u,c,r,!1,null,"ee7d3fe6",null),f=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{main:!0,list:t.list},style:{backgroundImage:"url("+t.club.clubImage+")"},on:{click:t.enter}},[n("div",{staticClass:"content"},[n("p",{staticClass:"title"},[t._v(t._s(t.club.clubName))]),n("div",{staticClass:"right"},[n("p",{staticClass:"date"},[t._v(t._s(t.club.createdAt.substring(0,10).replace("-","/").replace("-","/")))]),n("p",{staticClass:"member"},[t._v(t._s(t.club.clubMembers.length+"位成員"))])])])])},m=[],v={name:"ClubPreview",props:{club:Object,list:Boolean,disable:Boolean},methods:{enter:function(){this.disable||(this.$store.commit("setSelectedClub",this.club),this.$router.push("/Club"))}}},h=v,b=(n("331f"),Object(l["a"])(h,p,m,!1,null,"23c015be",null)),g=b.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main_c"},[s("img",{attrs:{src:n("781f")},on:{click:function(e){return t.$emit("cancel")}}}),s("div",{staticClass:"title"},[t._v("建立你的社群")]),s("div",{staticClass:"block"},[s("div",{staticClass:"pair"},[s("div",{staticClass:"topic"},[t._v("社群名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.clubName,expression:"clubName"}],attrs:{type:"text"},domProps:{value:t.clubName},on:{input:function(e){e.target.composing||(t.clubName=e.target.value)}}})]),s("div",{staticClass:"pair"},[s("div",{staticClass:"topic"},[t._v("社群成員")]),s("div",{class:{matchBlock:!0,focus:t.focusPartner}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"Your Partners"},domProps:{value:t.username},on:{focus:function(e){t.focusPartner=!0},blur:function(e){t.focusPartner=!1},input:[function(e){e.target.composing||(t.username=e.target.value)},t.searchUser]}}),s("div",{staticClass:"selectedUsers"},t._l(this.selectedUser,(function(t,e){return s("img",{key:e,attrs:{src:t.userPhoto?t.userPhoto:n("3abc"),alt:""}})})),0),t._l(this.matchUsers,(function(e,n){return s("MemberItem",{key:n,attrs:{user:e},on:{select:t.selectUser}})}))],2)]),s("div",{staticClass:"pair"},[s("div",{staticClass:"topic"},[t._v("封面照片")]),s("input",{attrs:{type:"file"},on:{change:t.uploadFile}})]),s("div",{staticClass:"pair"},[s("button",{on:{click:t.create}},[t._v("建立")])])])])},w=[],_=(n("ac1f"),n("1276"),{name:"NewClub",data:function(){return{username:"",matchUsers:[],selectedUser:[],focusPartner:!1,clubName:"",clubImage:"",clubMembers:"",uploadedFile:""}},methods:{searchUser:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getAllUserByUsername",t.username);case 2:n=e.sent,t.matchUsers=n.data.data,console.log(t.matchUsers);case 5:case"end":return e.stop()}}),e)})))()},create:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s,a,i,c,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$emit("cancel"),n=[],s=t.clubMembers.split(" "),s[0])for(a=0;a<s.length;a++)n.push(s[a]);return n=JSON.stringify(n),i=new FormData,i.append("clubImage",t.uploadedFile),i.set("clubName",t.clubName),i.set("clubMembers",n),e.next=11,t.$store.dispatch("createClub",i);case 11:return c=e.sent,r=new FormData,r.append("clubImage",t.uploadedFile),e.next=16,t.$store.dispatch("clubImage",r);case 16:o=e.sent,console.log(c),console.log(o);case 19:case"end":return e.stop()}}),e)})))()},uploadFile:function(t){this.uploadedFile=t.target.files[0]}}}),x=_,k=(n("1b3e"),Object(l["a"])(x,C,w,!1,null,"52ded864",null)),y=k.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hide,expression:"hide"}],class:{main_l:!0,show:t.show}},[n("div",{staticClass:"header"},[t._v(" CooMoney -- 團隊記帳工具 ")])])},R=[],L=n("e67d"),O=n.n(L),$={name:"List",props:{show:Boolean},methods:{hide:function(){this.show&&this.$emit("toggleList")}},mounted:function(){this.popupItem=this.$el},directives:{ClickOutside:O.a}},I=$,S=(n("1e47"),Object(l["a"])(I,N,R,!1,null,"1c1ecb1d",null)),j=S.exports,E=n("2482"),M={name:"Home",components:{SearchBar:f,ClubPreview:g,NewClub:y,BlurMask:E["a"],List:j},props:{},data:function(){return{clubLayout:!1,createNewClub:!1,showList:!1,joinedClubs:[]}},beforeMount:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.$store.state),t.next=3,this.$store.dispatch("getClub");case 3:e=t.sent,this.joinedClubs=e.data.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},P=M,U=(n("fb20"),Object(l["a"])(P,s,a,!1,null,"fbdac97e",null));e["default"]=U.exports},e5fc:function(t,e,n){"use strict";var s=n("60b1"),a=n.n(s);a.a},e67d:function(t,e){function n(t){return"function"===typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function s(t,e){if(!t||!e)return!1;for(var n=0,s=e.length;n<s;n++)try{if(t.contains(e[n]))return!0;if(e[n].contains(t))return!1}catch(a){return!1}return!1}function a(t){return"undefined"!==typeof t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,e,i){if(!n(e))return;function c(e){if(i.context){var n=e.path||e.composedPath&&e.composedPath();n&&n.length>0&&n.unshift(e.target),t.contains(e.target)||s(i.context.popupItem,n)||t.__vueClickOutside__.callback(e)}}t.__vueClickOutside__={handler:c,callback:e.value};const r="ontouchstart"in document.documentElement?"touchstart":"click";!a(i)&&document.addEventListener(r,c)},update:function(t,e){n(e)&&(t.__vueClickOutside__.callback=e.value)},unbind:function(t,e,n){const s="ontouchstart"in document.documentElement?"touchstart":"click";!a(n)&&t.__vueClickOutside__&&document.removeEventListener(s,t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},e8b5:function(t,e,n){var s=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}},fb20:function(t,e,n){"use strict";var s=n("46e1"),a=n.n(s);a.a},fb6a:function(t,e,n){"use strict";var s=n("23e7"),a=n("861d"),i=n("e8b5"),c=n("23cb"),r=n("50c4"),o=n("fc6a"),u=n("8418"),l=n("b622"),d=n("1dde"),f=n("ae40"),p=d("slice"),m=f("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),h=[].slice,b=Math.max;s({target:"Array",proto:!0,forced:!p||!m},{slice:function(t,e){var n,s,l,d=o(this),f=r(d.length),p=c(t,f),m=c(void 0===e?f:e,f);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(d,p,m);for(s=new(void 0===n?Array:n)(b(m-p,0)),l=0;p<m;p++,l++)p in d&&u(s,l,d[p]);return s.length=l,s}})}}]);
//# sourceMappingURL=chunk-0ce14a29.0e21d572.js.map